<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ajax</title>
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <!-- bootstrap-icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body class="bg-light">
    <div class="container mt-3">
        <p>
            <button type="button" class="btn btn-primary ml-5" id="btnGetPosts">get posts</button>

            <button type="button" class="btn btn-primary" id="btnPostPosts">post posts</button>
        </p>
        <table class="table table-bordered table-hover" id="tbPosts">
            <thead>
                <tr>
                    <th>id</th>
                    <th>userId</th>
                    <th>title</th>
                    <th>body</th>
                </tr>
            </thead>
            <tbody>
                <tr>

                </tr>
            </tbody>
        </table>
    </div>

    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- font-awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js"
        integrity="sha512-rpLlll167T5LJHwp0waJCh3ZRf7pO6IT1+LZOhAyP6phAirwchClbTZV3iqL3BMrVxIYRbzGTpli4rfxsCK6Vw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
        integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
        crossorigin="anonymous"></script>
    <!-- custom js -->
    <script>
        $('#btnGetPosts').on('click', function () {
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts',
                type: 'GET',
                dataType: 'JSON',
                success: function (response) {
                    $('#tbPosts > tbody').empty();
                    // console.log(response.length);
                    // for(초기값; 조건; 변화){ }

                    let userId_list = ['', '조유진', '고현정', '문채원', '강미경', '허경영', '강지영', '이시우', '문대정', '홍서현', '최희섭'];

                    let userId_json = {
                        '1': '조유진',
                        '2': '고현정',
                        '3': '문채원',
                        '4': '강미경',
                        '5': '허경영',
                        '6': '강지영',
                        '7': '이시우',
                        '8': '문대정',
                        '9': '홍서현',
                        '10': '최희섭',
                    }

                    //     for (let i = 0; i < response.length; i++) {
                    //         let id = response[i]['id'];
                    //         // let userId = userId_list[response[i]['userId']];
                    //         let userId = userId_json[response[i]['userId']];
                    //         let title = response[i]['title'];
                    //         let body = response[i]['body'];

                    //         console.log(id, userId, title, body);

                    //         let row = '<tr>';
                    //         row += '<td>' + id + '</td>';
                    //         row += '<td>' + userId + '</td>';
                    //         row += '<td>' + title + '</td>';
                    //         row += '<td>' + body + '</td>';
                    //         row += '</tr>';

                    //         $('#tbPosts > tbody').append(row);
                    //     }

                    // // forEach문
                    // response.forEach(function (element, index) {
                    //     let id = element['id'];
                    //     // let userId = userId_list[element['userId']];
                    //     let userId = userId_json[element['userId']];
                    //     let title = element['title'];
                    //     let body = element['body'];

                    //     // console.log(id, userId, title, body);
                    //     // console.log(index, element);

                    //     let row = '<tr>';
                    //     row += '<td>' + id + '</td>';
                    //     row += '<td>' + userId + '</td>';
                    //     row += '<td>' + title + '</td>';
                    //     row += '<td>' + body + '</td>';
                    //     row += '</tr>';

                    //     $('#tbPosts > tbody').append(row);
                    // });                    
                    
                    let row='';
                    $.each(response, function (index, element) {
                        let id = element['id'];
                        // let userId = userId_list[element['userId']];
                        let userId = userId_json[element['userId']];
                        let title = element['title'];
                        let body = element['body'];

                        console.log(id,userId,title,body)

                        // console.log(id, userId, title, body);
                        // console.log(index, element);

                        row += '<tr>';
                        row += '<td>' + id + '</td>';
                        row += '<td>' + userId + '</td>';
                        row += '<td>' + title + '</td>';
                        row += '<td>' + body + '</td>';
                        row += '</tr>';
                        console.log(row)

                        // $('#tbPosts > tbody').append(row);
                        
                    });
                    $('#tbPosts > tbody').html(row);                    
                },
                error: function (request, status, error) {
                    consol.log(error);
                }
            });
        });
        $('#btnPostPosts').on('click', function () {
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts',
                type: 'POST',
                dataType: 'JSON',
                data: {
                    'userId': 1,
                    'title': 'adsf',
                    'body': 'adsgasdgadsf',
                },
                success: function (response) {
                    console.log(response);
                },
                error: function (request, status, error) {
                    consol.log(error);
                }
            });
        });
    </script>
    <!--// custom js -->
</body>

</html>